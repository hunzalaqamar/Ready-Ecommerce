import{_ as ue,y as pe,D as me,u as ce,n as ve,d as f,j as fe,p as he,e as _e,c as d,o as i,b as p,a as o,a2 as be,t as s,l as c,h as m,g as u,a3 as ge,R as C,A as g,B as w,q as _,P as ye,T as xe,J as $e}from"./app-5e4c1E4T.js";import{_ as we}from"./AuthPageHeader-D7tTH-YT.js";import{_ as ke}from"./VerifyOtpModal-CF7gmadx.js";import{r as M}from"./ExclamationTriangleIcon-4dd5qUul.js";const Pe={class:"p-3 md:p-4 xl:p-6"},Ve={class:"max-w-[920px] mx-auto bg-white rounded-xl md:rounded-2xl p-3 md:p-4 xl:p-6"},Ce={class:"p-4 bg-slate-50 rounded-xl border border-slate-100 relative"},Me={class:"text-primary text-sm font-medium"},Ue={class:"flex flex-col gap-2 justify-center items-center"},De=["src"],je={class:"flex gap-2"},Ne={for:"upload",class:"text-white text-sm font-normal px-2 py-1 md:px-3 md:py-2 bg-slate-800 rounded-md cursor-pointer"},Se={key:1,class:"flex items-center gap-1 absolute top-3 right-3 border py-0.5 px-2 rounded-3xl bg-green-200 text-green-600"},Be={class:"p-3 bg-white rounded-xl border border-slate-100 mt-3"},Ae={class:"grid grid-cols-1 lg:grid-cols-2 gap-y-5 gap-x-6"},Ee={for:"name",class:"form-label"},Te=["placeholder"],Le={key:0,class:"text-red-500 text-sm"},Re={for:"name",class:"form-label mb-2"},Fe={key:0,class:"text-red-500 text-sm"},Oe={for:"phone",class:"form-label justify-between"},ze={key:0,class:"flex items-center gap-1"},Ie={key:1,class:"text-green-500 text-sm flex items-center gap-0.5"},qe={class:"flex"},Ge=["placeholder","maxlength"],He={key:0,class:"text-red-500 text-sm"},Je={for:"gender",class:"form-label bg-transparent"},Ye={value:"",disabled:"",selected:""},Ke={value:"male"},Qe={value:"female"},We={value:"other"},Xe={key:0,class:"text-red-500 text-sm"},Ze={for:"date",class:"form-label"},et={key:0,class:"text-red-500 text-sm"},tt={for:"email",class:"form-label justify-between"},ot={key:0,class:"flex items-center gap-1"},lt={key:1,class:"text-green-500 text-sm flex items-center gap-0.5"},at={key:0,class:"text-red-500 text-sm"},st={key:0,type:"submit",class:"bg-primary px-4 md:px-6 py-2 md:py-4 rounded-lg :md:rounded-[10px] text-white mt-6"},rt={key:1,type:"button",class:"bg-primary-200 px-4 md:px-6 py-2 md:py-4 rounded-lg :md:rounded-[10px] text-primary mt-6 flex items-center justify-center cursor-not-allowed gap-2",disabled:""},nt={__name:"MyProfile",setup(dt){var D,j,N,S,B,A,E,T;const le=pe(),U=me(),v=ce(),n=ve(),a=f(null),y=f(!1),x=f(null),$=f(!1),k=f(!1),P=()=>{k.value=!0},ae=()=>{var e;x.value=(e=n.user)==null?void 0:e.profile_photo,$.value=!1},se=e=>{x.value=URL.createObjectURL(e.target.files[0]),l.value.profile_photo=e.target.files[0],$.value=!0},l=f({name:(D=n.user)==null?void 0:D.name,phone:(j=n.user)==null?void 0:j.phone,gender:(N=n.user)!=null&&N.gender?(S=n.user)==null?void 0:S.gender:"",date_of_birth:(B=n.user)==null?void 0:B.date_of_birth,email:(A=n.user)==null?void 0:A.email,profile_photo:null,phone_code:(E=n.user)==null?void 0:E.phone_code,country:(T=n.user)==null?void 0:T.country}),V=f([]),re=f(!1);fe(()=>{var e,t;n.user&&(x.value=(e=n.user)==null?void 0:e.profile_photo),window.scrollTo(0,0),((t=n.user)==null?void 0:t.email)==="user@readyecommerce.com"&&(re.value=!0),ne()}),he(()=>l.value.country,e=>{const t=V.value.find(h=>h.name==e);l.value.phone_code=t==null?void 0:t.phone_code});const ne=()=>{axios.get("/countries").then(e=>{V.value=e.data.data.countries})},de={component:$e,props:{title:"Profile Updated",message:"Your profile updated successfully"}},ie=()=>{const e=new FormData;e.append("name",l.value.name),e.append("phone",l.value.phone),e.append("gender",l.value.gender?l.value.gender:""),e.append("date_of_birth",l.value.date_of_birth?l.value.date_of_birth:""),e.append("email",l.value.email?l.value.email:""),e.append("country",l.value.country?l.value.country:""),e.append("phone_code",l.value.phone_code?l.value.phone_code:""),l.value.profile_photo&&e.append("profile_photo",l.value.profile_photo),y.value=!0,axios.post("/update-profile",e,{headers:{Authorization:n.token}}).then(t=>{n.user=t.data.data.user,$.value=!1,y.value=!1,U(de,{type:"default",hideProgressBar:!0,icon:!1,position:v.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3}),a.value={}}).catch(t=>{var h,b;y.value=!1,t.response.status===401&&(n.logout(),le.push("/")),a.value=t.response.data.errors,(h=a.value)!=null&&h.profile_photo&&U.error((b=a.value)==null?void 0:b.profile_photo[0],{position:v.langDirection==="rtl"?"bottom-right":"bottom-left"})})};return(e,t)=>{var b,L,R,F,O,z,I,q,G,H,J,Y,K,Q,W,X,Z,ee,te,oe;const h=_e("v-select");return i(),d("div",null,[p(we,{title:e.$t("My Profile")},null,8,["title"]),o("div",Pe,[o("form",{onSubmit:t[10]||(t[10]=be(r=>ie(),["prevent"]))},[o("div",Ve,[o("div",Ce,[o("div",Me,s(e.$t("Profile Picture")),1),o("div",Ue,[o("img",{src:x.value,alt:"",class:"w-24 h-24 md:w-36 md:h-36 bg-white rounded-full object-cover"},null,8,De),o("div",je,[o("label",Ne,[o("input",{type:"file",id:"upload",class:"hidden",onChange:se},null,32),m(" "+s(e.$t("Change Photo")),1)]),$.value?(i(),d("button",{key:0,class:"px-2 py-1 md:px-3 md:py-2 bg-red-500 text-white rounded-md",onClick:ae},[p(u(ge),{class:"w-5 h-5"})])):c("",!0)])]),(b=u(n).user)!=null&&b.account_verified?(i(),d("div",Se,[p(u(C),{class:"w-5 h-5"}),m(" "+s(e.$t("Verified")),1)])):(i(),d("div",{key:0,class:"flex items-center gap-1 absolute top-3 right-3 border py-0.5 px-2 rounded-3xl bg-red-200 text-red-600",onClick:t[0]||(t[0]=r=>P())},[p(u(M),{class:"w-5 h-5"}),m(" "+s(e.$t("Unverified")),1)]))]),o("div",Be,[o("div",Ae,[o("div",null,[o("label",Ee,s(e.$t("Name")),1),g(o("input",{type:"text",id:"name","onUpdate:modelValue":t[1]||(t[1]=r=>l.value.name=r),placeholder:e.$t("Enter name"),class:_(["form-input",a.value&&((L=a.value)!=null&&L.name)?"border-red-500":"border-slate-200"])},null,10,Te),[[w,l.value.name]]),a.value&&((R=a.value)!=null&&R.name)?(i(),d("span",Le,s((F=a.value)==null?void 0:F.name[0]),1)):c("",!0)]),o("div",null,[o("label",Re,s(e.$t("Country")),1),p(h,{options:V.value,label:"name",reduce:r=>r.name,modelValue:l.value.country,"onUpdate:modelValue":t[2]||(t[2]=r=>l.value.country=r),placeholder:e.$t("Select Country"),dir:u(v).langDirection||"ltr"},null,8,["options","reduce","modelValue","placeholder","dir"]),a.value&&((O=a.value)!=null&&O.country)?(i(),d("span",Fe,s((z=a.value)==null?void 0:z.country[0]),1)):c("",!0)]),o("div",null,[o("label",Oe,[m(s(e.$t("Mobile Number"))+" ",1),u(v).register_otp_type=="phone"?(i(),d("div",ze,[(I=u(n).user)!=null&&I.email_verified?(i(),d("span",Ie,[p(u(C),{class:"w-4 h-4"}),m(" "+s(e.$t("Verified")),1)])):(i(),d("span",{key:0,class:"text-red-400 text-sm flex items-center gap-0.5 cursor-pointer",onClick:t[3]||(t[3]=r=>P())},[p(u(M),{class:"w-4 h-4"}),m(" "+s(e.$t("Unverified")),1)]))])):c("",!0)]),o("div",qe,[o("span",{class:_(["text-slate-700 text-base font-normal leading-normal bg-slate-100 p-2 border-y flex items-center",u(v).langDirection=="rtl"?"border-r rounded-tr-lg rounded-br-lg":"border-l rounded-tl-lg rounded-bl-lg"])}," +"+s(l.value.phone_code||"00"),3),g(o("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=r=>l.value.phone=r),placeholder:e.$t("Enter phone number"),class:_(["text-base font-normal w-full p-3 placeholder:text-slate-400 border focus:border-primary outline-none",[(q=a.value)!=null&&q.phone?"border-red-500":"border-slate-200",u(v).langDirection=="rtl"?"rounded-tl-lg rounded-bl-lg":"rounded-tr-lg rounded-br-lg"]]),maxlength:u(v).phoneMaxLength,onInput:t[5]||(t[5]=r=>l.value.phone=l.value.phone.replace(/[^\d]/g,""))},null,42,Ge),[[w,l.value.phone]])]),a.value&&((G=a.value)!=null&&G.phone)?(i(),d("span",He,s((H=a.value)==null?void 0:H.phone[0]),1)):c("",!0)]),o("div",null,[o("label",Je,s(e.$t("Gender")),1),g(o("select",{name:"gender",id:"gender","onUpdate:modelValue":t[6]||(t[6]=r=>l.value.gender=r),class:_(["form-input bg-transparent h-[52px]",a.value&&((J=a.value)!=null&&J.gender)?"border-red-500":"border-slate-200"])},[o("option",Ye,s(e.$t("Select a gender")),1),o("option",Ke,s(e.$t("Male")),1),o("option",Qe,s(e.$t("Female")),1),o("option",We,s(e.$t("Other")),1)],2),[[ye,l.value.gender]]),a.value&&((Y=a.value)!=null&&Y.gender)?(i(),d("span",Xe,s((K=a.value)==null?void 0:K.gender[0]),1)):c("",!0)]),o("div",null,[o("label",Ze,s(e.$t("Date of Birth")),1),g(o("input",{type:"date",id:"date","onUpdate:modelValue":t[7]||(t[7]=r=>l.value.date_of_birth=r),class:_(["form-input",a.value&&((Q=a.value)!=null&&Q.date_of_birth)?"border-red-500":"border-slate-200"])},null,2),[[w,l.value.date_of_birth]]),a.value&&((W=a.value)!=null&&W.date_of_birth)?(i(),d("span",et,s((X=a.value)==null?void 0:X.date_of_birth[0]),1)):c("",!0)]),o("div",null,[o("label",tt,[m(s(e.$t("Email Address"))+" ",1),u(v).register_otp_type=="email"?(i(),d("div",ot,[(Z=u(n).user)!=null&&Z.email_verified?(i(),d("span",lt,[p(u(C),{class:"w-4 h-4"}),m(" "+s(e.$t("Verified")),1)])):(i(),d("span",{key:0,class:"text-red-400 text-sm flex items-center gap-0.5 cursor-pointer",onClick:t[8]||(t[8]=r=>P())},[p(u(M),{class:"w-4 h-4"}),m(" "+s(e.$t("Unverified")),1)]))])):c("",!0)]),g(o("input",{type:"email",id:"email","onUpdate:modelValue":t[9]||(t[9]=r=>l.value.email=r),class:_(["form-input",a.value&&((ee=a.value)!=null&&ee.email)?"border-red-500":"border-slate-200"]),placeholder:"Enter email"},null,2),[[w,l.value.email]]),a.value&&((te=a.value)!=null&&te.email)?(i(),d("span",at,s((oe=a.value)==null?void 0:oe.email[0]),1)):c("",!0)])]),y.value?(i(),d("button",rt,[m(s(e.$t("Processing"))+" ",1),p(xe)])):(i(),d("button",st,s(e.$t("Update Profile")),1))])])],32)]),p(ke,{showModal:k.value,onHideModal:t[11]||(t[11]=r=>k.value=!1)},null,8,["showModal"])])}}},ct=ue(nt,[["__scopeId","data-v-cbcb6fbe"]]);export{ct as default};
