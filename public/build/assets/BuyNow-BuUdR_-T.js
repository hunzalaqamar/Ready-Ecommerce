import{_ as z,y as L,v as I,u as T,n as O,D as K,d as b,j as W,p as B,c as m,o as u,a as e,l as C,b as f,t as s,g as d,A as k,B as G,q as V,m as Q,f as Z,R as ee,h as te,T as se,J as oe,F as H,r as R,e as ae,w as U,U as ne,I as j,V as le}from"./app-5e4c1E4T.js";import{_ as re}from"./OrderConfirmModal-BEPxPs2b.js";import{_ as ie}from"./VerifyOtpModal-CF7gmadx.js";import{r as de}from"./TrashIcon-BdSDV2EW.js";import{_ as ce}from"./CheckoutShippingAddress-CbE0msNm.js";import{r as ue}from"./HomeIcon-B7JSbYX6.js";import"./AddressForm-CkpRKYRp.js";import"./AddressFormModal-BNxTDtpz.js";const me={class:"p-6 bg-white rounded-2xl border border-slate-200"},pe={class:"text-slate-950 text-xl font-medium leading-7"},he={class:"my-4 flex justify-between gap-4"},_e={class:"text-slate-950 text-base font-normal leading-normal"},ve={class:"text-slate-950 text-base font-normal leading-normal"},fe={class:"my-4 flex justify-between gap-4"},ye={class:"text-red-500 text-base font-normal leading-normal"},be={class:"text-slate-950 text-base font-normal leading-normal"},ge={class:"my-4 flex justify-between gap-4"},xe={class:"text-slate-950 text-base font-normal leading-normal"},we={class:"text-slate-950 text-base font-normal leading-normal"},$e={class:"my-4 flex justify-between gap-4"},ke={class:"text-slate-950 text-base font-normal leading-normal"},Ce={class:"text-slate-950 text-base font-normal leading-normal"},Pe={class:"my-4 flex justify-between gap-4"},Me={class:"text-slate-950 text-base font-normal leading-normal"},Ne={class:"text-slate-950 text-base font-normal leading-normal"},Se={class:"my-4 flex justify-between gap-4"},De={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},je={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},Be={class:"p-4 mt-6 bg-slate-100 rounded-xl"},Ve={class:"text-black text-base font-normal leading-normal"},Ie={class:"relative mt-2"},Te=["placeholder"],Oe={class:"absolute top-1/2 -translate-y-1/2 left-3"},Ae={key:0,class:"p-4 bg-white rounded-xl border border-slate-200 flex items-center justify-between mt-3"},Ue={class:"animated-text"},ze={key:2,class:"px-6 py-4 w-full mt-4 bg-primary-200 rounded-[10px] text-primary text-base font-semibold flex items-center justify-center gap-2",disabled:""},Le={__name:"BuyNowCheckoutOrderSummary",props:{note:String,paymentMethod:String},setup(N){const g=new L,n=I(),r=T(),x=O(),i=K(),p=b(!1),t=b(""),_=b(!1),v=N,a=b({total_amount:0,delivery_charge:0,coupon_discount:0,payable_amount:0,order_tax_amount:0});W(()=>{t.value=n.coupon_code,n.isLoadingCart||l()}),B(()=>n.isLoadingCart,()=>{n.isLoadingCart||l()});const l=()=>{axios.post("/cart/checkout",{shop_ids:[n.buyNowShopId],is_buy_now:!0,coupon_code:t.value},{headers:{Authorization:x.token}}).then(o=>{a.value=o.data.data.checkout,n.buyNowProduct=o.data.data.checkout_items[0],p.value=o.data.data.apply_coupon,p.value&&t.value.length>0?(i.success(o.data.message,{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"}),n.coupon_code=t.value):!p.value&&t.value.length>0&&(i.error(o.data.message,{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"}),n.coupon_code="")}).catch(o=>{i.error(o.response.data.message,{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"})})},S=()=>{t.value.length>0&&l()},h=()=>{t.value="",p.value=!1,n.coupon_code="",l()},D={component:oe,props:{title:"Order Placed",message:"Your order has been placed successfully."}},P=b(!1),F=()=>{if(!n.address){i.error("Please select shipping address");return}if(v.paymentMethod==null){i.error("Please select payment method",{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"});return}n.buyNowProduct?(P.value=!0,axios.post("/place-order",{shop_ids:[n.buyNowShopId],address_id:n.address.id,payment_method:v.paymentMethod,coupon_code:t.value,note:v.note,is_buy_now:!0},{headers:{Authorization:x.token}}).then(o=>{P.value=!1,i(D,{type:"default",hideProgressBar:!0,icon:!1,position:r.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3}),a.value.total_amount=0,a.value.delivery_charge=0,a.value.coupon_discount=0,a.value.payable_amount=0,n.buyNowProduct=null,n.coupon_code="";let c=o.data.data.order_payment_url;if(c!=null){E(c);return}else n.showOrderConfirmModal=!0}).catch(o=>{i.error(o.response.data.message,{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"}),P.value=!1})):i.error("Please select at least one product",{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"})},E=o=>{let c=700,w=700,$=screen.width/2-c/2,q=screen.height/2-w/2,J="popup,resizable,height="+w+",width="+c+",top="+q+",left="+$,y=window.open(o,null,J);y.title="Payment Window Screen - Make Payment",y.onload=()=>{y.title="Payment Window Screen - Make Payment"},y.focus();var M=setInterval(X,1e3);function X(){try{if(y.closed||!y){clearInterval(M),y.close(),n.orderPaymentCancelModal=!0,i.error("Payment Canceled",{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"}),g.push({name:"home"});return}var A=y.location.pathname.replace(/\/order\/\d+/,"");if(A=="/payment/cancel"){clearInterval(M),setTimeout(()=>{y.close(),n.orderPaymentCancelModal=!0,i.error("Sorry! Payment Canceled",{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"}),g.push({name:"home"})},8e3);return}if(A=="/payment/success"){y.close(),clearInterval(M),n.showOrderConfirmModal=!0;return}}catch{}}setTimeout(()=>{clearInterval(M),y.close()},18e4)};return(o,c)=>{var w;return u(),m("div",null,[e("div",me,[e("div",pe,s(o.$t("Order Summary")),1),e("div",he,[e("div",_e,s(o.$t("Subtotal")),1),e("div",ve,s(d(r).showCurrency(a.value.total_amount)),1)]),e("div",fe,[e("div",ye,s(o.$t("Discount")),1),e("div",be," -"+s(d(r).showCurrency(a.value.coupon_discount)),1)]),c[3]||(c[3]=e("div",{class:"w-full h-[0px] border-t border-dashed border-slate-400"},null,-1)),e("div",ge,[e("div",xe,s(o.$t("Subtotal After Discount")),1),e("div",we,s(d(r).showCurrency((a.value.total_amount-a.value.coupon_discount).toFixed(2))),1)]),e("div",$e,[e("div",ke,s(o.$t("Shipping Charge")),1),e("div",Ce,s(d(r).showCurrency(a.value.delivery_charge)),1)]),e("div",Pe,[e("div",Me,s(o.$t("Vat & Tax")),1),e("div",Ne,s(d(r).showCurrency(a.value.order_tax_amount)),1)]),c[4]||(c[4]=e("div",{class:"w-full h-[0px] border border-slate-500"},null,-1)),e("div",Se,[e("div",De,s(o.$t("Total Payable")),1),e("div",je,s(d(r).showCurrency(a.value.payable_amount)),1)]),e("div",Be,[e("div",Ve,s(o.$t("Have a coupon"))+"? ",1),e("div",Ie,[k(e("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=$=>t.value=$),class:V(["formInputCoupon pr-14 p-3",p.value?"text-green-500 pl-10":""]),placeholder:o.$t("Enter coupon code")},null,10,Te),[[G,t.value]]),p.value?(u(),m("button",{key:1,class:"bg-slate-100 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:h},[f(d(de),{class:"w-6 h-6 text-red-500"})])):(u(),m("button",{key:0,class:"bg-slate-700 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:S},[f(d(Q),{class:"w-6 h-6 text-white"})])),e("span",Oe,[p.value?(u(),Z(d(ee),{key:0,class:"w-6 h-6 text-green-500"})):C("",!0)])])])]),!((w=d(x).user)!=null&&w.account_verified)&&d(r).orderPlaceAccountVerify?(u(),m("div",Ae,[e("span",Ue,s(o.$t("Please verify your account")),1),e("button",{class:"p-2 border border-primary rounded-md bg-primary-50 text-primary text-sm font-medium",onClick:c[1]||(c[1]=$=>_.value=!0)},s(o.$t("Verify Now")),1)])):C("",!0),P.value?(u(),m("button",ze,[te(s(o.$t("Processing"))+" ",1),f(se)])):(u(),m("button",{key:1,class:"px-6 py-4 w-full mt-4 bg-primary rounded-[10px] text-white text-base font-medium",onClick:F},s(o.$t("Place Order")),1)),f(re),f(ie,{showModal:_.value,onHideModal:c[2]||(c[2]=$=>_.value=!1)},null,8,["showModal"])])}}},We=z(Le,[["__scopeId","data-v-b9ce4f52"]]),Ge={class:"space-y-4 mt-3 transition duration-300"},He={class:"px-4 py-3 bg-slate-50 rounded-xl border border-slate-100"},Re={key:0,class:"text-slate-950 text-base font-medium leading-normal"},Fe={class:"space-y-2 divide-y divide-slate-200"},Ee={class:"w-[72px] h-[95px]"},qe=["src"],Je={class:"flex flex-col gap-1 w-full"},Xe={class:"text-primary text-xs font-normal leading-none"},Ye={class:"text-slate-950 text-base font-normal leading-normal"},Ke={class:"flex flex-wrap justify-between items-center gap-3"},Qe={class:"flex items-center gap-1"},Ze={class:"min-w-8 text-center px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},et={class:"px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},tt={class:"text-slate-800 text-base font-normal leading-normal"},st={__name:"BuyNowCheckoutProduct",setup(N){O();const g=T(),n=I();return(r,x)=>{var i,p;return u(),m("div",Ge,[e("div",He,[d(g).multiVendor?(u(),m("div",Re,s((i=d(n).buyNowProduct)==null?void 0:i.shop_name),1)):C("",!0),e("div",Fe,[(u(!0),m(H,null,R((p=d(n).buyNowProduct)==null?void 0:p.products,t=>{var _,v;return u(),m("div",{key:t.id,class:"flex gap-4 justify-start w-full items-center pt-1"},[e("div",Ee,[e("img",{src:t.thumbnail,class:"w-full h-full object-contain"},null,8,qe)]),e("div",Je,[e("div",Xe,s(t==null?void 0:t.brand),1),e("div",Ye,s(t==null?void 0:t.name),1),e("div",Ke,[e("div",Qe,[e("div",Ze,s((_=t==null?void 0:t.size)==null?void 0:_.name),1),e("div",et,s((v=t==null?void 0:t.color)==null?void 0:v.name),1)]),e("div",tt," 1 X "+s(d(g).showCurrency((t==null?void 0:t.discount_price)>0?t==null?void 0:t.discount_price:t==null?void 0:t.price)),1)])])])}),128))])])])}}},ot={class:"main-container"},at={class:"flex items-center gap-2 overflow-hidden pt-4"},nt={class:"grow w-full overflow-hidden"},lt={class:"space-x-1 text-slate-600 text-sm font-normal truncate"},rt={class:"grid grid-cols-1 xl:grid-cols-3 my-3 gap-8"},it={class:"col-span-1 xl:col-span-2"},dt={class:"flex gap-2 justify-between items-center"},ct={class:"text-slate-950 text-lg sm:text-3xl font-medium leading-10"},ut={class:"text-primary-600 text-lg font-medium leading-normal tracking-tight"},mt={key:0},pt={class:"mt-6"},ht={class:"mb-1"},_t={class:"text-slate-950 text-xl font-medium leading-7"},vt={class:"text-slate-500 text-lg font-normal leading-7 tracking-tight"},ft=["placeholder"],yt={class:"p-6 mt-4 bg-white rounded-2xl border border-slate-200"},bt={class:"text-slate-950 text-xl font-medium leading-7"},gt={class:"mt-4 flex flex-wrap gap-4"},xt={for:"cash",class:"flex items-center gap-4 xl:min-w-80"},wt={class:"text-slate-500 text-base font-normal leading-normal"},$t={for:"card",class:"flex items-center gap-4 xl:min-w-80"},kt={class:"text-slate-500 text-base font-normal leading-normal"},Ct={key:0,class:"mt-5 border-t border-slate-200"},Pt={class:"text-slate-600 pt-2 block text-md font-medium leading-7"},Mt={class:"mt-3 flex flex-wrap gap-4"},Nt=["for"],St=["id","value"],Dt={class:""},jt=["src"],Bt={__name:"BuyNow",setup(N){const g=new L,n=O(),r=T(),x=I(),i=b(!0),p=b(""),t=b("cash"),_=b(null),v=b(null);return W(()=>{window.scrollTo(0,0),x.coupon_code="",_.value=t.value,n.user||g.push({name:"home"})}),B(t,()=>{t.value==="card"?_.value=v.value:_.value=t.value}),B(v,()=>{t.value==="card"&&(_.value=v.value)}),(a,l)=>{const S=ae("router-link");return u(),m("div",ot,[e("div",at,[f(S,{to:"/",class:"w-6 h-6"},{default:U(()=>[f(d(ue),{class:"w-5 h-5 text-slate-600"})]),_:1}),e("div",nt,[e("div",lt,[e("span",null,s(a.$t("Home")),1),l[5]||(l[5]=e("span",null,"/",-1)),e("span",null,s(a.$t("Cart")),1),l[6]||(l[6]=e("span",null,"/",-1)),e("span",null,s(a.$t("Checkout")),1)])])]),e("div",rt,[e("div",it,[e("div",{class:V(["py-4 border-b tran",i.value?"border-primary":"border-slate-200"])},[e("div",dt,[e("div",ct,s(a.$t("Checkout")),1),e("div",{class:"flex items-center gap-2 cursor-pointer",onClick:l[0]||(l[0]=h=>i.value=!i.value)},[e("div",ut," ("+s(d(x).buyNowProduct?1:0)+" "+s(a.$t("items"))+") ",1),f(d(ne),{class:V(["w-5 h-5 text-primary-600 transition duration-300",i.value?"rotate-180":""])},null,8,["class"])])]),i.value?(u(),m("div",mt,[f(st)])):C("",!0)],2),f(ce),e("div",pt,[e("div",ht,[e("span",_t,s(a.$t("Note")),1),e("span",vt," ("+s(a.$t("Optional"))+") ",1)]),k(e("textarea",{"onUpdate:modelValue":l[1]||(l[1]=h=>p.value=h),rows:"3",class:"form-input",placeholder:a.$t("Write your note here")+"..."},null,8,ft),[[G,p.value]])]),e("div",yt,[e("div",bt,s(a.$t("Payment Method")),1),e("div",gt,[e("label",xt,[k(e("input",{"onUpdate:modelValue":l[2]||(l[2]=h=>t.value=h),id:"cash",name:"payment",type:"radio",class:"radioBtn2",value:"cash",checked:""},null,512),[[j,t.value]]),l[7]||(l[7]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/money-2.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",wt,s(a.$t("Cash on delivery")),1)]),e("label",$t,[k(e("input",{"onUpdate:modelValue":l[3]||(l[3]=h=>t.value=h),id:"card",name:"payment",type:"radio",class:"radioBtn2",value:"card"},null,512),[[j,t.value]]),l[8]||(l[8]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/card.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",kt,s(a.$t("Credit or Debit Card")),1)])]),f(le,{"leave-active-class":"transition ease-in duration-300","enter-active-class":"transition ease-out duration-300","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:U(()=>[t.value==="card"?(u(),m("div",Ct,[e("span",Pt,s(a.$t("Available Payment Gateways")),1),e("div",Mt,[(u(!0),m(H,null,R(d(r).paymentGateways,h=>(u(),m("label",{key:h.id,for:h.name,class:"flex items-center gap-4 border relative has-[:checked]:border-primary has-[:checked]:shadow-lg p-2 rounded-md border-slate-200 cursor-pointer"},[k(e("input",{"onUpdate:modelValue":l[4]||(l[4]=D=>v.value=D),id:h.name,name:"paymentGateway",type:"radio",class:"sr-only",value:h.name},null,8,St),[[j,v.value]]),e("div",Dt,[e("img",{src:h.logo,alt:"",class:"w-32 h-16 object-contain"},null,8,jt)])],8,Nt))),128))])])):C("",!0)]),_:1})])]),f(We,{note:p.value,paymentMethod:_.value},null,8,["note","paymentMethod"])])])}}},Wt=z(Bt,[["__scopeId","data-v-6293e1c1"]]);export{Wt as default};
